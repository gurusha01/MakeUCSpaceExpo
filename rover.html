<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title>tuts</title>
	</head>
	<body>

		<canvas width="800" height="800"></canvas>

		<script type="text/javascript">
			window.onload = function()
			{
				let x = 0;
				let y = 0;
				let speed = 5;
				let angle = 0;
				let mod = 0;

				const canvas = document.querySelector("canvas");
				const context = canvas.getContext("2d");
				const car = new Image();
				car.src="./images/rover.png";

				window.addEventListener("keydown", (event) => {
					if(event.keyCode == 87) // W
					{
						mod = 1;
					}
					else if(event.keyCode == 83) // S
					{
						mod = -1;
					}
					else if(event.keyCode == 65) // A
					{
						angle -= 5;
					}
					else if(event.keyCode == 68) // D
					{
						angle += 5;
					}
				});

				window.addEventListener("keyup", (event) => {
					// Restores the mod property so that a key press that does not use
					// mod after a key press that USED mod will not change the x and y
					// positions of the rover (only the angle).
					if(event.keyCode == 87 || event.keyCode == 83)
					{
						mod = 0;
					}
				});

				let moveInterval = setInterval(() => {
					draw(context);
				}, 30);

				function draw(context)
				{
					context.clearRect(0, 0, 800, 800);

					// context.fillStyle = "rgb(200, 100, 220)";
					// context.fillRect(50, 50, 100, 100);

					x += (speed*mod) * Math.cos(Math.PI/180 * angle);
					y += (speed*mod) * Math.sin(Math.PI/180 * angle);

					context.save();

					// 'Translate' here is necessary to correctly update the x and y locations
					// of the rover.
					context.translate(x, y);
					context.rotate(Math.PI/180 * angle);
					context.drawImage(car, -car.width/2, -car.height/2);
					context.restore();
				}
			};
		</script>
	</body>
</html>
